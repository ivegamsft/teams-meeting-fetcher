# Example Terraform variables for AWS deployment
# Copy this file to terraform.tfvars and fill in your values

environment    = "dev"
aws_region     = "us-east-1"
aws_account_id = "123456789012"  # Your AWS account ID

# S3 bucket name (must be globally unique)
s3_bucket_name = "tmf-webhook-payloads-dev"

# Lambda package paths (relative to this directory)
lambda_package_path      = "../../apps/aws-lambda/lambda.zip"
authorizer_package_path  = "../../apps/aws-lambda-authorizer/authorizer.zip"

# Client state secret for webhook validation
# Generate a strong random value: openssl rand -base64 32
# This value must match what you use when creating Graph subscriptions
client_state = "your-secret-client-state-value-change-this"

# Optional: Email for SNS notifications (requires confirmation)
notification_email = "your-email@example.com"

# Optional: AWS CLI profile for credential isolation
# aws_profile = "tmf-dev"

#=============================================================================
# SUBSCRIPTION RENEWAL VARIABLES
#=============================================================================
# These are used for automatically renewing Graph API subscriptions

# Microsoft Graph tenant ID (GUID)
# From Azure IaC output: app_tenant_id
azure_graph_tenant_id = "your-tenant-id-guid"

# Microsoft Graph app client ID (GUID)
# From Azure IaC output: app_client_id
azure_graph_client_id = "your-client-id-guid"

# Microsoft Graph app client secret
# From Azure IaC output: app_client_secret
azure_graph_client_secret = "your-client-secret-value"

# Subscription renewal schedule (AWS Events cron expression)
# Default: 2 AM UTC daily
# Format: cron(minute hour day month ? day-of-week)
renewal_schedule_expression = "cron(0 2 * * ? *)"

#=============================================================================
# MEETING BOT VARIABLES
#=============================================================================

# Teams bot app client ID (from Azure IaC output)
azure_bot_app_id = "your-bot-app-id"

# Teams bot app secret (from Azure IaC output)
azure_bot_app_secret = "your-bot-app-secret"

# Entra group ID to allow-list meeting organizers (Azure IaC output: admin_group_id)
azure_allowed_group_id = "your-entra-group-id"

# Group membership cache TTL (seconds)
group_cache_ttl_seconds = 900

#=============================================================================
# AUTO-INSTALL VARIABLES (Optional)
#=============================================================================
# When set, an EventBridge rule polls calendars and proactively installs
# the bot into upcoming meeting chats before the meeting starts.

# Teams app catalog ID (Get-TeamsApp -DistributionMethod Organization)
teams_catalog_app_id = ""

# Comma-separated AAD user IDs whose calendars are polled
# If empty and ALLOWED_GROUP_ID is set, group members are polled instead
watched_user_ids = ""

# Minutes into the future to scan for upcoming meetings (default: 60)
poll_lookahead_minutes = 60
