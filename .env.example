# Teams Meeting Fetcher - Environment Configuration
# 
# Copy this file to .env and fill in with your actual values
# IMPORTANT: Never commit .env to git - use .gitignore to prevent this
# For local development, also create .env.local
# For cloud deployments, see .env.local.template and .env.local.azure.template
#
# Graph API Configuration
GRAPH_TENANT_ID=00000000-0000-0000-0000-000000000000
GRAPH_CLIENT_ID=00000000-0000-0000-0000-000000000000
GRAPH_CLIENT_SECRET=<REPLACE_ME>

# Target Entra Group (the group whose members' meetings we track)
ENTRA_GROUP_ID=00000000-0000-0000-0000-000000000000

# Webhook Security
WEBHOOK_AUTH_SECRET=<REPLACE_ME>
WEBHOOK_AUTH_ALGORITHM=bearer

# Server Configuration
NODE_ENV=production
PORT=3000
LOG_LEVEL=info

# Database Configuration
DATABASE_PATH=./data/meetings.db
DATABASE_ENGINE=sqlite  # or: postgresql, mysql

# Graph API Polling
TRANSCRIPTION_POLL_INTERVAL_MS=30000  # 30 seconds
TRANSCRIPTION_MAX_RETRIES=40           # ~20 minutes total
WEBHOOK_SUBSCRIPTION_TTL_DAYS=29       # Renew before expiry

# Membership Check (how often to check for new/removed group members)
GROUP_MEMBERSHIP_CHECK_INTERVAL_MS=86400000  # 24 hours

# Azure Event Grid Configuration (optional, if integrating with Event Grid)
EVENTGRID_TOPIC_NAME=evgt-tmf
EVENTGRID_URI=https://your-topic.eventgrid.azure.net/api/events
EVENTGRID_KEY=<REPLACE_ME>

# AWS Integration (optional, if using Lambda)
AWS_WEBHOOK_ENDPOINT=https://your-api-gateway.execute-api.region.amazonaws.com/prod/graph
AWS_S3_BUCKET=your-s3-bucket-name
AWS_API_KEY=<REPLACE_ME>

# Azure Key Vault (optional, for storing secrets in cloud)
AZURE_KEYVAULT_URL=https://your-keyvault.vault.azure.net/
AZURE_TENANT_ID=00000000-0000-0000-0000-000000000000

# HTTPS Configuration
HTTPS_ENABLED=true
HTTPS_CERT_PATH=/path/to/cert.pem
HTTPS_KEY_PATH=/path/to/key.pem

# Logging
LOG_FORMAT=json  # or: text
LOG_FILE_PATH=./logs/app.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m

# Email Notifications (optional)
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASSWORD=<REPLACE_ME>
NOTIFICATION_EMAIL=admin@example.com

# External API Manager (if using one like Kong/nginx)
API_MANAGER_URL=https://api-gateway.example.com
API_MANAGER_TOKEN=<REPLACE_ME>

# Slack Integration (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_NOTIFICATIONS_ENABLED=false

# Sentry Error Tracking (optional)
SENTRY_DSN=<REPLACE_ME>
SENTRY_ENABLED=false

# Application Insights (optional)
APPINSIGHTS_INSTRUMENTATION_KEY=<REPLACE_ME>
